<mat-toolbar *ngIf="this.finalNav !== null"
    [ngClass]="scrolled ? 'scrolledToolbar': 'defaultToolbar'"
    class="{{navStyle}}"
    (window:scroll)="onWindowScroll($event)">


    <div class="menuOpen">
        <mat-icon (click)="toggle()" class="menu-open-button">menu</mat-icon>
    </div>

    <img id="navLogo" src="./assets/images/Paragon_V3-white.png" alt=""  routerLink="">
    <div class="navLinks" [class]="'nav-'+inputState"   [@navShrink]="inputState">
        <!-- (mouseenter)="menuTrigger.openMenu();"
                (mouseleave)="menuTrigger.closeMenu()" -->
       

            <!-- About -->
        <div *ngIf="finalNav.about"
			>
            <a mat-button class="nav-button" class="navLink" [routerLink]="finalNav.about.headpath"> {{finalNav.about.name}}</a>
        </div>


        <!-- Product -->
        <div *ngIf="finalNav.product"
			>
            <a mat-button class="nav-button" class="navLink" [matMenuTriggerFor]='matproductmenu'
                #menuTrigger="matMenuTrigger"
                
                (mouseenter)="menuTrigger.openMenu()"
                (click)="router.navigate([finalNav.product.headpath]);"
                > {{finalNav.product.name}}</a>
            <mat-menu #matproductmenu="matMenu" class="navLink">
                <div (click)="menuTrigger.closeMenu();" (mouseleave)="menuTrigger.closeMenu()">
                    <a class="navMenuDropdownItem" mat-menu-item *ngFor="let link of finalNav.product.childLinks"
                                        [routerLink]="link.path">{{link.name}}</a>
                </div>
                
            </mat-menu>
        </div>


        <!-- Markets -->
        <div *ngIf="finalNav.market">
            <a mat-button class="navLink" [matMenuTriggerFor]='matmarketmenu' [routerLink]="finalNav.market.headpath"
                #menuTrigger="matMenuTrigger"
                (mouseenter)="menuTrigger.openMenu()"
                > {{finalNav.market.name}}</a>
            <mat-menu #matmarketmenu="matMenu" class="navLink">
                <div (mouseleave)="menuTrigger.closeMenu()">
                    <a class="navMenuDropdownItem" mat-menu-item *ngFor="let link of finalNav.market.childLinks"
                    [routerLink]="link.path">{{link.name}}</a>
                </div>

                
            </mat-menu>
        </div>

        <!-- Services -->
        <div *ngIf="finalNav.service">
            <a mat-button class="navLink" [matMenuTriggerFor]='matservicemenu' 
                #menuTrigger="matMenuTrigger"
                (mouseenter)="menuTrigger.openMenu()"
                [routerLink]="finalNav.service.headpath"
                > {{finalNav.service.name}}</a>
            <mat-menu #matservicemenu="matMenu" class="navLink" >
                <div (mouseleave)="menuTrigger.closeMenu()">
                    <a class="navMenuDropdownItem" mat-menu-item *ngFor="let link of finalNav.service.childLinks"
                    [routerLink]="link.path">{{link.name}}</a>
                </div>
                
            </mat-menu>
        </div>
        <!-- Services -->
        <div *ngIf="finalNav.resource"
			class="nav-button">
            <a mat-button class="navLink" [routerLink]="finalNav.resource.headpath"> {{finalNav.resource.name}}</a>
        </div>


        <!-- About -->
        <div *ngIf="finalNav.contact" 
			class="nav-button">
            <a mat-button class="navLink" [routerLink]="finalNav.contact.headpath"> {{finalNav.contact.name}}</a>
        </div>

    </div>

    <div class="searchBar">
        <mat-form-field  [@inputWiden]="inputState" [class]="inputState" >
            <mat-label>Search</mat-label>
            <input class="input" matInput placeholder="Press Enter to Search" [matMenuTriggerFor]='searchInput'  #menuTrigger="matMenuTrigger" (keyup.enter)="onSearchChange($event);menuTrigger.openMenu()">
        </mat-form-field>
        <a  class="searchIcon" (click)="activateSearch()"><mat-icon >search</mat-icon></a>
        <mat-menu #matservicemenu="matMenu" class="navLink"  #searchInput="matMenu" (mouseleave)="menuTrigger.closeMenu()">
            <div  >
                <ng-template *ngIf="searchData?.product">
                    <div  *ngFor="let product of searchData.product; let i= index"  >
                        {{product.product_name}}
                    </div>
                </ng-template>
            </div>
        
        </mat-menu>
    </div>
    <div class="contactDetails">
            <img class="contactIconRing" src="./assets/images/customIcons/contactIcon.svg" alt="" >

        <div>
            <p class="mat-headline-3">+44 (0)1245 280 448</p>
            <p class="mat-headline-4">info@paragon-security.com</p>
        </div>

    </div>
</mat-toolbar>
